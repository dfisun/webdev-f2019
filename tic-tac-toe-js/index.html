<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Tic Tac Toe</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    This is a page for a simple Tic Tac Toe game.
    <table>
      <tr>
        <td><div id="c00" class="cell" onclick="makeTurn('c00')"></div></td>
        <td><div id="c01" class="cell" onclick="makeTurn('c01')"></div></td>
        <td><div id="c02" class="cell" onclick="makeTurn('c02')"></div></td>
      </tr>
      <tr>
        <td><div id="c10" class="cell" onclick="makeTurn('c10')"></div></td> 
        <td><div id="c11" class="cell" onclick="makeTurn('c11')"></div></td>
        <td><div id="c12" class="cell" onclick="makeTurn('c12')"></div></td>
      </tr>
      <tr>
        <td><div id="c20" class="cell" onclick="makeTurn('c20')"></div></td>
        <td><div id="c21" class="cell" onclick="makeTurn('c21')"></div></td>
        <td><div id="c22" class="cell" onclick="makeTurn('c22')"></div></td>
      </tr>
    </table>
    <script>
      let currentPlayer = "X";
      let gameState = [[0, 0, 0],
                       [0, 0, 0],
                       [0, 0, 0]];

      function makeTurn(cell) {
        console.log("[makeTurn] run isGameWon()");
        if (isGameWon(gameState)) {
          alert("Game is won");
          return;
        }

        if (isEmptyCell(cell)) {
          if (currentPlayer == "X") {
            placeX(cell);
            currentPlayer = "O";
          } else {
            placeO(cell);
            currentPlayer = "X";
          }
        }
      }

      function isEmptyCell(cell) {
        let row = cell.charAt(1);
        let col = cell.charAt(2);
        return gameState[row][col] == 0;
      }

      function isGameWon(gameState) {
        let winner = 0;
        let isWon = false;
        console.log("[isGameWon] Check first row");
        if (gameState[0][0] === gameState[0][1] &&
            gameState[0][1] === gameState[0][2]) {
          winner = gameState[0][0];
          if (winner === "X" || winner === "O") {
            console.log("[isGameWon] First row is filled");
            return true;
          }
        }
      }

      function placeX(cell) {
        let row = cell.charAt(1);
        let col = cell.charAt(2);
        gameState[row][col] = currentPlayer;
        document.getElementById(cell).className = "cell cross";
      }

      function placeO(cell) {
        let row = cell.charAt(1);
        let col = cell.charAt(2);
        gameState[row][col] = currentPlayer;
        document.getElementById(cell).className = "cell ring";
      }
    </script>
  </body>
</html>
